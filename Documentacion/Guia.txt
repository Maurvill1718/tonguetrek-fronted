Guía de Demostración 
Usuario de Prueba:

Correo: mauriciovill018@gmail.com

Documento: 1030405060

Contraseña Inicial: DemoTest123!


Paso 1: Registro de Usuario
POST /api/cliente

Body:

JSON

{
    "t1": "1030405060",
    "t2": "Mauricio Villegas (Demo)",
    "t3": "mauriciovill018@gmail.com",
    "t4": "3123456789",
    "t5": "DemoTest123!"
}
Resultado: Muestras el 201 Created y menciona que se envió el correo de bienvenida.

Paso 2: Inicio de Sesión
POST /api/login

Body:

JSON

{
    "t1": "mauriciovill018@gmail.com",
    "t2": "DemoTest123!"
}
Acción: Copia el token de acceso. Lo necesitarás.

Paso 3: Completar Perfil de Seguridad
POST /api/perfil

Authorization: Bearer Token (Pega el token que copiaste).

Body:

JSON

{
    "direccion": "Universidad de Antioquia",
    "fechaexpedicion": "2020-10-10",
    "pregunta1": "Color favorito",
    "respuesta1": "Verde",
    "pregunta2": "Segundo nombre",
    "respuesta2": "Andres",
    "pregunta3": "Equipo de futbol",
    "respuesta3": "Medellin"
}
Resultado: Muestras el 201 Created.

Paso 4: Cerrar Sesión
POST /api/cerrar-sesion

Authorization: Bearer Token (Pega el mismo token de acceso).

Resultado: Muestras el 200 OK con el mensaje "Sesión cerrada y token revocado...". 

Paso 5: Verificar que la Sesión se Cerró
Propósito: Demostrar que el token revocado ya no da acceso.

PUT /api/perfil (Intentamos modificar el perfil con el token viejo).

Authorization: Bearer Token (Pega el token que acabas de revocar).

Body:

JSON

{
    "t2": "Intento de Modificación",
    "t4": "12345"
}
Resultado: Muestras el error 401 Unauthorized con el mensaje "Token inválido o revocado". Esto prueba que el cierre de sesión fue efectivo.

Paso 6: Iniciar Recuperación de Cuenta
POST /api/recuperar/iniciar

Body:

JSON

{
    "documento": "1030405060"
}
Resultado: Recibes la primera pregunta y un sessionToken.

Acción: Copia el sessionToken.

8. Proceso de Validación Interactivo
(A) Primer Intento (Fallido a propósito)

POST /api/recuperar/validar-pregunta

Body: (Usa el sessionToken y una respuesta incorrecta).

JSON

{
    "sessionToken": "pega_el_primer_sessionToken_aqui",
    "respuesta": "Respuesta incorrecta",
    "fechaexpedicion": "2020-10-10"
}
Resultado: Muestras el error 401 que dice "Te quedan 2 intento(s)" y que te da una nueva pregunta y un nuevo sessionToken.

Acción: Copia el NUEVO sessionToken.

(B) Segundo Intento (Correcto)

POST /api/recuperar/validar-pregunta

Body: (Usa el NUEVO sessionToken y la respuesta correcta a la segunda pregunta que te hizo).

JSON

{
    "sessionToken": "pega_el_nuevo_sessionToken_aqui",
    "respuesta": "La respuesta correcta",
    "fechaexpedicion": "2020-10-10"
}
Resultado: El proceso continúa hasta que hayas respondido las 3 preguntas correctamente. La respuesta final te dará el resetToken.

Acción: Copia el resetToken final.

Paso 9: Restablecer la Contraseña 
POST /api/recuperar/restablecer

Body:

JSON

{
    "resetToken": "pega_el_resetToken_final_aqui",
    "nuevaContrasena": "NuevaClaveFinal2025!"
}
Resultado: Recibirás un 200 OK y un correo de confirmación.

Paso 10: Verificación Final
POST /api/login

Body:

JSON

{
    "t1": "mauriciovill018@gmail.com",
    "t2": "NuevaClaveFinal2025!"
}
Resultado: Un inicio de sesión exitoso.
Paso 8: Eliminar la Cuenta
Propósito: Demostrar que un usuario autenticado puede desactivar su propia cuenta de forma segura.

Método: DELETE

Ruta: /api/perfil

Authorization: Bearer Token (Pega el nuevo token de acceso que obtuviste en el paso anterior).

Body: Ninguno (No Body).

Resultado: Muestras el 200 OK con el mensaje de eliminación y mencionas que se envió el correo final de confirmación.